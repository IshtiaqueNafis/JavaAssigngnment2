package com.company;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.StringTokenizer;

public class HashTable {
    //region   properies and getters
    private final int size;
    public int numberOfItems;

    public Word[] getWords() {
        return words;
    }

    private Word[] words;
    //endregion

    //region   Constructor
    public HashTable(int size) {
        this.size = size;
        words = new Word[size];
        numberOfItems = 0;


    }
    //endregion


    //region add,delete and search
    public boolean addNewWord(Word word) {

        if (get(word) != -1) { // if the words search not equal null that means there is word in there already on the list.
            return false;
        }
        if (calculateLoadFactor() <= 80) { // hashtable is 80% full
            var index = CrudWorker(word);
            words[index] = word;
            System.out.println(word.term + " Successfully added at " + index + " position");
            numberOfItems++;
            return true;
        }

        return false;
    }

    public int get(Word word) {
        int i = word.hashCode() % size, h = 1;
        while (words[i] != null) {
            if (words[i].term.equals(word.term)) {
                return i;
            }
            i = (i + h * h++) % size;
        }
        return -1;
    }

    public boolean deleteWord(Word word) {
        if (get(word) != -1) { // if the words search not equal null that means there is word in there already on the list.
            int index = get(word);
            words[index] = null;
            numberOfItems--;
            System.out.println(word.term + " Successfully deleted " + index + " position");

            return true;
        }

        return false;

    }

    public List<Word> checkSentence(String sentences) {
        List<Word> listOfWords = convertWords(sentences); // convert sentences to words listobject
        List<Word> notFoundWords = new ArrayList<>();
        for (Word listOfWord : listOfWords) {
            var index = get(listOfWord); // via get method check for not founded word

            if (index == -1) {
                notFoundWords.add(listOfWord); // this means word not has been found
            }


        }

        return notFoundWords;
    }

    //endregion


    //region private methods searching,hash, convert string to word  calculateLoadFactor()


    private int CrudWorker(Word word) {


        int temp = word.hashCode() % size; // get the original hashvalue
        int i = temp, h = 1;
        do {
            if (words[i] == null) {
                return i;
            }
            i = (i + h * h++) % size; // recalculate hash value
        } while (i != temp);


        return -1;
    }


    private int calculateLoadFactor() {
        float value = (float) numberOfItems / size;
        float result = value * 100;
        return (int) result;
    }

    // this will convert list of string to senteces.
    private List<Word> convertWords(String sentences) {

        StringTokenizer stok = new StringTokenizer(sentences);
        List<Word> listOfWords = new ArrayList<Word>();
        while (stok.hasMoreTokens()) {
            listOfWords.add(new Word(stok.nextToken()));


        }


        return listOfWords;
    }
//endregion


}




























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































